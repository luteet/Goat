const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger, .header__nav, body"),burger=document.querySelector(".header__burger"),header=document.querySelector(".header");body.addEventListener("click",(function(e){function t(t){return e.target.closest(t)}t(".header__burger")&&menu.forEach(e=>{e.classList.toggle("_active")});const n=t(".clients__slide--body"),r=document.querySelector(".clients__slide--body._active");if(n){const e=document.querySelector(".clients__slide--body._active");e&&!n.classList.contains("_active")&&e.classList.remove("_active"),n.classList.toggle("_active")}else r&&r.classList.remove("_active")}));const videoOnHover=document.querySelectorAll(".video-on-hover");function wordsToLines(){document.querySelectorAll(".words-to-lines").forEach(e=>{const t=e;let n,r,a=t.innerHTML.trim().split(" "),s=!1;t.innerHTML="",Array.from(a).forEach((e,t)=>{s?s&&"mark"==typeTag&&(a[t]=`<span><mark>${e}&nbsp;</mark></span>`):a[t]=`<span>${e}&nbsp;</span>`,e.includes("<mark>")&&e.includes("</mark>")?(e=(e=e.replace("<mark>","")).replace("</mark>",""),s=!0,typeTag="mark",a[t]=`<span><mark>${e}&nbsp;</mark></span>`):e.includes("<mark>")?(e=e.replace("<mark>",""),s=!0,typeTag="mark",a[t]=`<span><mark>${e}&nbsp;</mark></span>`):e.includes("</mark>")&&(s=!1,e=e.replace("</mark>",""),a[t]=`<span><mark>${e}&nbsp;</mark></span>`),e.includes("<img")?(r=e,n=!0,delete a[t]):e.includes(">")||e.includes("mark>")||!n?n&&(r+=e,a[t]=`<span>${r}</span>`,n=!1):(r+=` ${e} `,delete a[t])}),Array.from(a).forEach((e,n)=>{e&&t.insertAdjacentHTML("beforeend",a[n])}),a=[];let o=t.querySelectorAll("span"),i=0;o.forEach((e,t)=>{o[t-1]?(o[t-1].offsetTop==e.offsetTop||i++,a.push([e,i])):a.push([e,i])}),t.innerHTML="";let l=[],c=0;Array.from(a).forEach((e,t)=>{a[t-1]?a[t-1][1]==e[1]?(l[c]||(l[c]=[]),l[c].push(e[0])):(c++,l[c]||(l[c]=[]),l[c].push(e[0])):(l[c]=[],l[c].push(e[0]))}),setTimeout(()=>{Array.from(l).forEach(e=>{let n=document.createElement("span"),r=document.createElement("span");n.classList.add("words-line"),r.classList.add("words-line-element");for(let t=0;t<e.length;t++)r.append(e[t]);n.append(r),t.append(n)}),e.classList.add("_init")},0)})}videoOnHover.forEach(e=>{let t=!1;e.addEventListener("mouseenter",(function(){const t=e.querySelector(".video-wrapper").querySelector(".video-element");e.classList.add("_hover"),t.play()})),e.addEventListener("mouseleave",(function(){e.classList.remove("_hover"),t=!0;const n=e.querySelector(".video-wrapper").querySelector(".video-element");n.currentTime=0,n.pause()}))});const underlineText=document.querySelectorAll(".underline-text");underlineText.forEach(e=>{const t=document.createElement("span");t.classList.add("underline-text-element");const n=e.querySelector("span").cloneNode(!0);n.classList.add("underline-text-span"),t.append(n),e.insertAdjacentElement("afterbegin",t)});const mouse=document.querySelectorAll(".mouse"),openCursor=document.querySelector(".mouse._open-mode"),drag=document.querySelector(".mouse._cursor-drag");var prevEvent,currentEvent;mouse.forEach(e=>{e.style.setProperty("--size",e.offsetWidth+"px")});const customCursorOpen=document.querySelectorAll(".custom-cursor-open");customCursorOpen.forEach(e=>{e.addEventListener("mouseenter",(function(){e.querySelector(".mouse").classList.add("_visible")})),e.addEventListener("mouseleave",(function(){e.querySelector(".mouse").classList.remove("_visible")}))});const cursorDrag=document.querySelectorAll(".cursor-drag");function moveMouse(e){currentEvent=e,window.innerWidth>=1e3&&(customCursorOpen.forEach(t=>{t.style.setProperty("--mouse-x",e.clientX-t.getBoundingClientRect().x+"px"),t.style.setProperty("--mouse-y",e.clientY-t.getBoundingClientRect().y+"px")}),cursorDrag.forEach(t=>{t.style.setProperty("--mouse-x",e.clientX-t.getBoundingClientRect().x+"px"),t.style.setProperty("--mouse-y",e.clientY-t.getBoundingClientRect().y+"px")}))}cursorDrag.forEach(e=>{e.addEventListener("mouseenter",(function(){drag.classList.add("_visible")})),e.addEventListener("mouseleave",(function(){drag.classList.remove("_visible")}))}),document.addEventListener("pointermove",moveMouse),document.addEventListener("pointerdown",(function(){mouse.forEach(e=>{e.classList.add("_down")})})),document.addEventListener("pointerup",(function(){mouse.forEach(e=>{e.classList.remove("_down")})}));var maxSpeed=0,prevSpeed=0,maxPositiveAcc=0,maxNegativeAcc=0;setInterval((function(){if(prevEvent&&currentEvent)var e=Math.abs(currentEvent.screenX-prevEvent.screenX),t=Math.abs(currentEvent.screenY-prevEvent.screenY),n=Math.sqrt(e*e+t*t)/2;prevEvent=currentEvent,prevSpeed=n,html.style.setProperty("--speed",n+"px")}),100);const videoElements=document.querySelectorAll(".video-auto-element");videoElements.forEach(e=>{e.addEventListener("play",(function(){e.closest(".video-auto-wrapper").querySelector(".video-auto-poster").classList.add("_hidden")}))});let projectsSlider=new Swiper(".projects__slider",{spaceBetween:24,slidesPerView:"auto"}),sliderSpeed=1500,autoplayDelay=4e3;const passionTimer=document.querySelectorAll(".passion__timer");let passionContentSlider=new Swiper(".passion__content-slider",{spaceBetween:0,slidesPerView:1,effect:"fade",loop:!0,speed:sliderSpeed,autoplay:{delay:autoplayDelay,disableOnInteraction:!1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init:function(){html.style.setProperty("--slider-speed",autoplayDelay/1e3+"s");const e=document.querySelector(".passion__content-slider").querySelector(".swiper-slide-active").querySelector(".passion__timer");e.classList.add("_slide-change"),e.value=100},slideChangeTransitionEnd:function(){const e=document.querySelector(".passion__timer._slide-change");if(e){e.classList.remove("_slide-change"),e.value=0;const t=passionContentSlider.wrapperEl.querySelector(".swiper-slide-active").querySelector(".passion__timer");t.classList.add("_slide-change"),t.value=100}else{const e=passionContentSlider.wrapperEl.querySelector(".swiper-slide-active").querySelector(".passion__timer");e.classList.add("_slide-change"),e.value=100}}}}),clientsSlider=new Swiper(".clients__slider",{spaceBetween:24,slidesPerView:"auto"}),latesUpdatesSlider=new Swiper(".lates-updates__slider",{spaceBetween:24,slidesPerView:"auto"}),windowSize=window.innerWidth;const preloader=document.querySelector(".preloader");body.classList.add("_active"),preloader.classList.add("_active");const scrollCheck=document.createElement("div");scrollCheck.classList.add("scroll-check"),scrollCheck.setAttribute("aria-hidden",!0),body.append(scrollCheck);let scrollPositionX=0,scrollPositionY=0,bodyScroll=document.getElementById("main-scrollbar");function isHidden(e){return null===e.offsetParent}let tl=gsap.timeline();const animSection=document.querySelectorAll(".anim-section");let animSectionArray=[];function sortByIndex(e){return windowSize<980?e.sort((e,t)=>e.mobIndex>t.mobIndex?1:-1):e.sort((e,t)=>e.index>t.index?1:-1)}function animScroll(){Array.from(animSectionArray).forEach((e,t)=>{const n=e[0],r=Number(e[0].dataset.offset)?Number(e[0].dataset.offset):0;elementCoords=n.getBoundingClientRect(),window.innerHeight/1.5-r>elementCoords.top&&!n.classList.contains("_animated")&&(n.classList.add("_animated"),e[1].play())})}function parallaxElementsFunc(e){parallaxElements.forEach(t=>{if("to-bottom"==t.dataset.pos)document.querySelector(t.dataset.anchor).offsetTop>e-window.innerHeight&&(t.style.transform=`translate3d(0,${e/7}px,0)`);else if(document.querySelector(t.dataset.anchor).offsetTop>e-window.innerHeight/2){let n=(document.querySelector(t.dataset.anchor).offsetTop-e)/30;n>=25?n=25:n<=-25&&(n=-25),t.style.transform=`translate3d(0,${n}px,0)`}})}animSection.forEach(e=>{const t=e.querySelectorAll(".anim-element");let n=[];t.forEach(e=>{const t=Number(e.dataset.index),r=Number(e.dataset.mobIndex)?Number(e.dataset.mobIndex):t;n.push({element:e,index:t,mobIndex:r})}),n=sortByIndex(n);let r=new TimelineMax;r.pause(),Array.from(n).forEach((e,t)=>{const n=Number(e.element.dataset.duration)?Number(e.element.dataset.duration):.5,a=Number(e.element.dataset.delay)?Number(e.element.dataset.delay):0,s=Number(e.element.dataset.stagger)?Number(e.element.dataset.stagger):.05,o="true"==e.element.dataset.childrensReverse;e.element.classList.contains("anim-text")?r.to(e.element,{duration:n,delay:a,onStart:function(){let t=[];e.element.querySelectorAll(".words-line > .words-line-element").forEach(e=>{t.push(e)}),gsap.to(t,{transform:"translate3d(0,0,0)",startAt:{transform:"translate3d(0,100%,0)"},ease:"power4.out",duration:n,stagger:s})}},0!=t&&"-=1"):e.element.classList.contains("anim-fade-in")?r.to(e.element,{opacity:1,duration:n,delay:a},0!=t&&"-=1"):e.element.classList.contains("anim-fade-up")?r.to(e.element,{opacity:1,transform:"translate3d(0,0,0)",startAt:{transform:"translate3d(0,25px,0)"},duration:n,delay:a,onStart:function(){e.element.classList.add("_animated")}},0!=t&&"-=1"):e.element.classList.contains("anim-fade-right")?r.to(e.element,{opacity:1,transform:"translate3d(0,0,0)",startAt:{transform:"translate3d(-20px,0,0)"},duration:n,delay:a},0!=t&&"-=1"):e.element.classList.contains("anim-fade-left")?r.to(e.element,{opacity:1,transform:"translate3d(0,0,0)",startAt:{transform:"translate3d(20px,0,0)"},duration:n,delay:a},0!=t&&"-=1"):e.element.classList.contains("anim-zoom-out")?r.to(e.element,{opacity:1,transform:"scale3d(1,1,1)",startAt:{transform:"scale3d(1.1,1.1,1)",opacity:0},duration:n,ease:"power2.out",delay:a},0!=t&&"-=1"):e.element.classList.contains("anim-childrens-fade-right")?r.to(e.element,{opacity:1,duration:n,delay:a,onStart:function(){let t=Array.from(e.element.children);o&&(t=t.reverse()),gsap.to(t,{transform:"translate3d(0,0,0)",opacity:1,startAt:{transform:"translate3d(-20px,0,0)",opacity:0},duration:n,stagger:s})}},0!=t&&"-=1"):e.element.classList.contains("anim-fade-progress-right")?r.to(e.element,{opacity:1,maskImage:"linear-gradient(90deg, rgba(72,172,240,1) 100%, transparent 105%)",startAt:{maskImage:"linear-gradient(90deg, rgba(72,172,240,1) -5%, transparent 0%)"},duration:n,delay:a},0!=t&&"-=1"):e.element.classList.contains("anim-childrens-fade-left")?r.to(e.element,{opacity:1,duration:n,delay:a,onStart:function(){let t=Array.from(e.element.children);o&&(t=t.reverse()),gsap.to(t,{transform:"translate3d(0,0,0)",opacity:1,startAt:{transform:"translate3d(20px,0,0)",opacity:0},duration:n,stagger:s})}},0!=t&&"-=1"):e.element.classList.contains("anim-zoom-in")?r.to(e.element,{opacity:1,transform:"scale3d(1,1,1)",startAt:{transform:"scale3d(0.7,0.7,1)"},duration:n,delay:a},0!=t&&"-=1"):e.element.classList.contains("anim-clip-down")&&r.to(e.element,{opacity:1,clipPath:"polygon(0 0, 100% 0, 100% 100%, 0 100%)",startAt:{clipPath:"polygon(0 0, 100% 0, 100% 0%, 0 0%)",opacity:1},ease:"power2.out",duration:n,delay:a},0!=t&&"-=1")}),e.style.opacity=1,animSectionArray.push([e,r])}),document.addEventListener("scroll",(function(e){animScroll(),parallaxElementsFunc(Math.abs(scrollCheck.getBoundingClientRect().y))}));const parallaxElements=document.querySelectorAll(".anim-parallax-element");function smoothScrollbarInit(){bodyScrollBar=Scrollbar.init(bodyScroll,{damping:.05,delegateTo:document}),bodyScrollBar.addListener(({offset:e})=>{scrollPositionX=e.x,scrollPositionY=e.y,body.classList.contains("_active")&&bodyScrollBar.setPosition(0,0,0),parallaxElementsFunc(scrollPositionY),animScroll()})}let resizeCheck={};function resizeCheckFunc(e,t,n){windowSize<=e&&(1==resizeCheck[String(e)]||null==resizeCheck[String(e)])&&0!=resizeCheck[String(e)]&&(resizeCheck[String(e)]=!1,n()),windowSize>=e&&(0==resizeCheck[String(e)]||null==resizeCheck[String(e)])&&1!=resizeCheck[String(e)]&&(resizeCheck[String(e)]=!0,t())}function resize(){windowSize=window.innerWidth,html.style.setProperty("--height-screen",window.innerHeight+"px"),html.style.setProperty("--height-header",header.offsetHeight+"px"),resizeCheckFunc(1e3,(function(){smoothScrollbarInit(),bodyScrollBar.setPosition(0,0),bodyScrollBar.limit.y=0,bodyScrollBar.track.xAxis.element.remove(),bodyScrollBar.update()}),(function(){try{bodyScrollBar.destroy()}catch{}}))}resize(),window.onresize=resize,document.addEventListener("DOMContentLoaded",(function(){setTimeout(()=>{preloader.classList.remove("_active"),wordsToLines(),setTimeout(()=>{body.classList.remove("_active"),animScroll(),gsap.to(header,{transform:"translate3d(0,0,0)",delay:.5})},500),setTimeout(()=>{preloader.classList.add("_loaded")},400)},1500)}));