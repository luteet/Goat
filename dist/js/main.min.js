const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger, .header__nav, body"),burger=document.querySelector(".header__burger"),header=document.querySelector(".header");body.addEventListener("click",(function(e){function t(t){return e.target.closest(t)}t(".header__burger")&&menu.forEach(e=>{e.classList.toggle("_active")});const o=t(".clients__slide--body"),r=document.querySelector(".clients__slide--body._active");if(o){const e=document.querySelector(".clients__slide--body._active");e&&!o.classList.contains("_active")&&(e.classList.remove("_active"),gsap.to(e.querySelectorAll(".word-span"),{transform:"translate3d(0,50%,0)",opacity:0,ease:"power4.out",duration:.3,stagger:0})),o.classList.contains("_active")?(e.classList.remove("_active"),gsap.to(o.querySelectorAll(".word-span"),{transform:"translate3d(0,50%,0)",opacity:0,ease:"power4.out",duration:.3,stagger:0})):(o.classList.add("_active"),gsap.to(o.querySelectorAll(".word-span"),{transform:"translate3d(0,0,0)",opacity:1,ease:"power4.out",duration:.3,stagger:.015}))}else r&&(r.classList.remove("_active"),gsap.to(r.querySelectorAll(".word-span"),{transform:"translate3d(0,50%,0)",opacity:0,ease:"power4.out",duration:.3,stagger:0}));const n=t(".animate-decor-lines"),s=document.querySelector(".animate-decor-lines._hover");if(n){const e=n.querySelectorAll(".words-decor-line"),t=document.createElement("span");t.innerHTML="&nbsp;",t.style.display="inline-block",t.style.position="absolute",t.style.pointerEvents="none",n.append(t);const o=t.offsetWidth;t.remove(),n.style.setProperty("--space-width",o+"px"),n.classList.contains("_hover")||(n.classList.add("_hover"),gsap.to(e,{transform:"scale(2,1)",duration:.5,stagger:.2}))}else s&&(s.classList.remove("_hover"),gsap.to(lines,{transform:"scale(0,1)",duration:.5,stagger:.2}))}));const videoOnHover=document.querySelectorAll(".video-on-hover");function wordsToSpan(){document.querySelectorAll(".words-to-span").forEach(e=>{const t=e;let o=t.textContent.trim().split(" ").map((function(e){return`<span class="word-span">${e}&nbsp;</span>`}));t.innerHTML="",Array.from(o).forEach((e,r)=>{e&&t.insertAdjacentHTML("beforeend",o[r])})})}function wordsToLines(){const e=document.querySelectorAll(".words-to-lines");let t=[];function o(e){let o=e;Array.from(t).forEach(e=>{const t=e[1],r=e[0];o&&r.classList.contains("_animated")&&r.classList.add("_resized"),r.classList.remove("_init");let n,s,a=t.trim().split(" "),l=!1;r.innerHTML="",Array.from(a).forEach((e,t)=>{l?l&&"mark"==typeTag&&(a[t]=`<span><mark>${e}&nbsp;</mark></span>`):a[t]=`<span>${e}&nbsp;</span>`,e.includes("<mark>")&&e.includes("</mark>")?(e=(e=e.replace("<mark>","")).replace("</mark>",""),l=!0,typeTag="mark",a[t]=`<span><mark>${e}&nbsp;</mark></span>`):e.includes("<mark>")?(e=e.replace("<mark>",""),l=!0,typeTag="mark",a[t]=`<span><mark>${e}&nbsp;</mark></span>`):e.includes("</mark>")&&(l=!1,e=e.replace("</mark>",""),a[t]=`<span><mark>${e}&nbsp;</mark></span>`),e.includes("<img")?(s=e,n=!0,delete a[t]):e.includes(">")||e.includes("mark>")||!n?n&&(s+=e,a[t]=`<span>${s}</span>`,n=!1):(s+=` ${e} `,delete a[t])}),Array.from(a).forEach((e,t)=>{e&&r.insertAdjacentHTML("beforeend",a[t])}),a=[];let i=r.querySelectorAll("span"),d=0;i.forEach((e,t)=>{i[t-1]?(i[t-1].offsetTop==e.offsetTop||d++,a.push([e,d])):a.push([e,d])}),r.innerHTML="";let c=[],u=0;Array.from(a).forEach((e,t)=>{a[t-1]?a[t-1][1]==e[1]?(c[u]||(c[u]=[]),c[u].push(e[0])):(u++,c[u]||(c[u]=[]),c[u].push(e[0])):(c[u]=[],c[u].push(e[0]))}),Array.from(c).forEach(e=>{let t=document.createElement("span"),o=document.createElement("span"),n=document.createElement("span");t.classList.add("words-line"),o.classList.add("words-decor-line"),n.classList.add("words-line-element");for(let t=0;t<e.length;t++)n.append(e[t]);t.append(n),t.append(o);const s=document.createElement("span");s.style.position="absolute",s.style.display="inline-block",s.style.pointerEvents="none",s.innerHTML="&nbsp;",r.append(t),r.append(s),r.style.setProperty("--space-width",s.offsetWidth+"px"),s.remove()}),r.classList.add("_init")})}e.forEach(e=>{t.push([e,e.innerHTML])}),o(),window.addEventListener("resize",(function(){o(!0)}))}videoOnHover.forEach(e=>{let t=!1;e.addEventListener("mouseenter",(function(){if(window.innerWidth>965){const t=e.querySelector(".video-wrapper").querySelector(".video-element");e.classList.add("_hover"),t.classList.contains("video-lazy-loading")?t.classList.contains("_loaded")&&t.play():t.play()}})),e.addEventListener("mouseleave",(function(){if(window.innerWidth>965){e.classList.remove("_hover"),t=!0;const o=e.querySelector(".video-wrapper").querySelector(".video-element");o.classList.contains("video-lazy-loading")?o.classList.contains("_loaded")&&(o.currentTime=0,o.pause()):(o.currentTime=0,o.pause())}}))}),wordsToSpan();const mouse=document.querySelectorAll(".mouse"),openCursor=document.querySelector(".mouse._open-mode"),drag=document.querySelector(".mouse._cursor-drag");var prevEvent,currentEvent;mouse.forEach(e=>{e.style.setProperty("--size",e.offsetWidth+"px")});const customCursorOpen=document.querySelectorAll(".custom-cursor-open");customCursorOpen.forEach(e=>{e.addEventListener("mouseenter",(function(){e.querySelector(".mouse").classList.add("_visible")})),e.addEventListener("mouseleave",(function(){e.querySelector(".mouse").classList.remove("_visible")}))});const cursorDrag=document.querySelectorAll(".cursor-drag");function moveMouse(e){currentEvent=e,window.innerWidth>=1e3&&(customCursorOpen.forEach(t=>{t.style.setProperty("--mouse-x",e.clientX-t.getBoundingClientRect().x+"px"),t.style.setProperty("--mouse-y",e.clientY-t.getBoundingClientRect().y+"px")}),cursorDrag.forEach(t=>{t.style.setProperty("--mouse-x",e.clientX-t.getBoundingClientRect().x+"px"),t.style.setProperty("--mouse-y",e.clientY-t.getBoundingClientRect().y+"px")}))}cursorDrag.forEach(e=>{e.addEventListener("mouseenter",(function(){drag.classList.add("_visible")})),e.addEventListener("mouseleave",(function(){drag.classList.remove("_visible")}))}),document.addEventListener("pointermove",moveMouse),document.addEventListener("pointerdown",(function(){mouse.forEach(e=>{e.classList.add("_down")})})),document.addEventListener("pointerup",(function(){mouse.forEach(e=>{e.classList.remove("_down")})}));const videoElements=document.querySelectorAll(".video-auto-element");videoElements.forEach(e=>{e.addEventListener("play",(function(){e.closest(".video-auto-wrapper").querySelector(".video-auto-poster").classList.add("_hidden")}))});const preloader=document.querySelector(".preloader"),preloaderElement=preloader.querySelector(".preloader__element"),videoLazyLoading=document.querySelectorAll(".video-lazy-loading");html.style.setProperty("--height-screen-start",window.innerHeight+"px"),html.style.setProperty("--height-screen",window.innerHeight+"px"),html.style.setProperty("--height-header",header.offsetHeight+"px"),document.addEventListener("DOMContentLoaded",(function(){preloaderElement.src=preloaderElement.dataset.src,preloaderElement.load(),preloaderElement.onloadeddata=function(){preloaderElement.play(),preloader.classList.add("_active"),setTimeout(()=>{preloader.classList.remove("_active"),wordsToLines();let e=window.innerWidth;const t=document.createElement("div");t.classList.add("scroll-check"),t.setAttribute("aria-hidden",!0),body.append(t);let o=0,r=document.getElementById("main-scrollbar");const n=document.querySelectorAll(".anim-section");let s=[];function a(){html.style.setProperty("--height-screen",window.innerHeight+"px"),html.style.setProperty("--height-header",header.offsetHeight+"px"),Array.from(s).forEach((e,t)=>{const o=e[0],r=Number(e[0].dataset.offset)?Number(e[0].dataset.offset):0;elementCoords=o.getBoundingClientRect(),window.innerHeight/1.5-r>elementCoords.top&&!o.classList.contains("_animated")&&(o.classList.add("_animated"),e[1].play())})}function l(e){i.forEach(t=>{if("to-bottom"==t.dataset.pos)document.querySelector(t.dataset.anchor).offsetTop>e-window.innerHeight&&(t.style.transform=`translate3d(0,${e/7}px,0)`);else{const o=document.querySelector(t.dataset.anchor);if(o.offsetTop>e-window.innerHeight){let r=(o.offsetTop-e)/7;r>=t.offsetHeight?r=t.offsetHeight:r<=-t.offsetHeight&&(r=-t.offsetHeight),t.style.setProperty("--y",r+"px")}}})}n.forEach(t=>{const o=t.querySelectorAll(".anim-element");let r=[];var n;o.forEach(e=>{const t=Number(e.dataset.index),o=Number(e.dataset.mobIndex)?Number(e.dataset.mobIndex):t;r.push({element:e,index:t,mobIndex:o})}),n=r,r=e<980?n.sort((e,t)=>e.mobIndex>t.mobIndex?1:-1):n.sort((e,t)=>e.index>t.index?1:-1);let a=new TimelineMax;a.pause(),Array.from(r).forEach((e,t)=>{const o=Number(e.element.dataset.duration)?Number(e.element.dataset.duration):.5,r=Number(e.element.dataset.delay)?Number(e.element.dataset.delay):0,n=Number(e.element.dataset.stagger)?Number(e.element.dataset.stagger):.05;e.element.classList.contains("anim-text")?a.to(e.element,{duration:o,delay:r,onStart:function(){let t=[];e.element.querySelectorAll(".words-line > .words-line-element").forEach(e=>{t.push(e)}),gsap.to(t,{transform:"translate3d(0,0,0)",startAt:{transform:"translate3d(0,100%,0)"},ease:"power4.out",duration:o,stagger:n,onComplete:function(){e.element.classList.add("_animated")}})}},0!=t&&"-=1"):e.element.classList.contains("anim-fade-in")?a.to(e.element,{opacity:1,duration:o,delay:r},0!=t&&"-=1"):e.element.classList.contains("anim-fade-up")&&a.to(e.element,{opacity:1,transform:"translate3d(0,0,0)",startAt:{transform:"translate3d(0,25px,0)"},duration:o,delay:r,onStart:function(){e.element.classList.add("_animated")}},0!=t&&"-=1")}),t.style.opacity=1,s.push([t,a])}),document.addEventListener("scroll",(function(e){a(),l(Math.abs(t.getBoundingClientRect().y))}));const i=document.querySelectorAll(".anim-parallax-element");let d={};function c(){var t,n,s;e=window.innerWidth,html.style.setProperty("--height-screen",window.innerHeight+"px"),html.style.setProperty("--height-header",header.offsetHeight+"px"),n=function(){bodyScrollBar=Scrollbar.init(r,{damping:.05,delegateTo:document}),bodyScrollBar.addListener(({offset:e})=>{scrollPositionX=e.x,o=e.y,body.classList.contains("_active")&&bodyScrollBar.setPosition(0,0,0),l(o),a()}),bodyScrollBar.setPosition(0,0),bodyScrollBar.limit.y=0,bodyScrollBar.track.xAxis.element.remove(),bodyScrollBar.update()},s=function(){try{bodyScrollBar.destroy()}catch{}},e<=(t=1e3)&&(1==d[String(t)]||null==d[String(t)])&&0!=d[String(t)]&&(d[String(t)]=!1,s()),e>=t&&(0==d[String(t)]||null==d[String(t)])&&1!=d[String(t)]&&(d[String(t)]=!0,n())}c(),window.onresize=c,setTimeout(()=>{body.classList.add("_overflow-visible"),a(),gsap.to(header,{transform:"translate3d(0,0,0)",delay:.5});let t;document.querySelectorAll(".animate-decor-lines").forEach(e=>{const t=e.querySelectorAll(".words-decor-line"),o=document.createElement("span");o.innerHTML="&nbsp;",o.style.display="inline-block",o.style.position="absolute",o.style.pointerEvents="none",e.append(o);const r=o.offsetWidth;o.remove(),e.style.setProperty("--space-width",r+"px"),e.addEventListener("mouseenter",(function(){gsap.to(t,{transform:"scale(2,1)",duration:.5,stagger:.2})})),e.addEventListener("mouseleave",(function(){gsap.to(t,{transform:"scale(0,1)",duration:.5,stagger:.2})}))}),document.querySelector(".projects__slider")&&(t=new Swiper(".projects__slider",{spaceBetween:24,slidesPerView:"auto"}));document.querySelectorAll(".passion__timer");let o,r,n;document.querySelector(".projects__slider")&&(o=new Swiper(".passion__content-slider",{spaceBetween:0,slidesPerView:1,allowTouchMove:!1,effect:"fade",loop:!0,speed:500,autoplay:{delay:4e3,disableOnInteraction:!1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init:function(){html.style.setProperty("--slider-speed","4s");const t=document.querySelector(".passion__content-slider").querySelector(".swiper-slide-active"),o=t.querySelector(".animate-title"),r=t.querySelector(".passion__timer");if(o&&e>965){const e=o.querySelectorAll(".words-line-element");gsap.to(e,{transform:"translate3d(0,0,0)",opacity:1,duration:.5,stagger:.07})}r.classList.add("_slide-change")},slideChangeTransitionEnd:function(){const e=o.wrapperEl.querySelector(".swiper-slide-active"),t=document.querySelector(".passion__timer._slide-change");if(t){setTimeout(()=>{t.classList.remove("_slide-change")},500);e.querySelector(".passion__timer").classList.add("_slide-change")}else{e.querySelector(".passion__timer").classList.add("_slide-change")}},slideChangeTransitionStart:function(){const t=o.wrapperEl.querySelector(".swiper-slide-active").querySelector(".animate-title");if(setTimeout(()=>{const e=o.wrapperEl.querySelector(".swiper-slide-prev"),t=!!e&&e.querySelector(".animate-title");if(t){const e=t.querySelectorAll(".words-line-element");gsap.to(e,{transform:"translate3d(0,50%,0)",opacity:1,duration:0,stagger:0})}},500),t){const o=t.querySelectorAll(".words-line-element");e>965&&gsap.to(o,{transform:"translate3d(0,0,0)",opacity:1,duration:.5,stagger:.07})}}}})),document.querySelector(".projects__slider")&&(r=new Swiper(".clients__slider",{spaceBetween:24,slidesPerView:"auto"})),document.querySelector(".projects__slider")&&(n=new Swiper(".lates-updates__slider",{spaceBetween:24,slidesPerView:"auto"}))},500),setTimeout(()=>{preloader.classList.add("_loaded")},400)},1500)}})),window.onload=function(){videoLazyLoading.forEach(e=>{e.src=e.dataset.src,"true"==e.dataset.autoplay&&(e.autoplay=!0),e.load(),e.onloadeddata=function(){e.classList.add("_loaded")}})};